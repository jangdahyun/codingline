{% load i18n %}
{% load socialaccount %}
{% load static %}
<!doctype html>
<html lang="ko" class="h-full">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{% trans "로그인" %}</title>

  <!-- Tailwind (CDN) -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Inter 폰트 -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- 분리된 커스텀 CSS -->
  <link rel="stylesheet" href="{% static 'css/login.css' %}">
</head>
<body class="h-full bg-[#1e1f22] text-white">
  <!-- 중앙 정렬 레이아웃(단일 컬럼) -->
  <main class="min-h-screen flex items-center justify-center p-6">
    <!-- 로그인 카드 -->
    <section class="flex items-center justify-center w-full">
      <div class="w-full max-w-md">
        <!-- 헤더 -->
        <header class="text-center mb-8">
          <h1 class="text-2xl font-bold">{% trans "다시 만나서 반가워요!" %}</h1>
          <p class="mt-1 text-sm text-gray-300">{% trans "계정에 로그인하세요" %}</p>
        </header>

        <div class="bg-[#313338]/80 backdrop-blur rounded-2xl shadow-xl ring-1 ring-white/5 p-6 space-y-5">
          <form method="post" action="{% url 'account_login' %}" class="space-y-5">
            {% csrf_token %}

            <!-- 전역 오류 -->
            {% if form.non_field_errors %}
            <div class="rounded-lg bg-red-500/10 text-red-300 text-sm px-3 py-2">
              {{ form.non_field_errors }}
            </div>
            {% endif %}

            <!-- 아이디/이메일 -->
            <div>
              <label for="id_login" class="block text-xs font-semibold text-gray-200 tracking-wide">{% trans "아이디 또는 이메일" %}</label>
              <input id="id_login" name="login" type="text" autocomplete="username" required
                     class="mt-2 w-full rounded-lg bg-[#1e1f22] text-white placeholder-gray-400 border border-transparent focus:border-[#5865F2] focus:outline-none focus:ring-2 focus:ring-[#5865F2]/40 px-4 py-3"
                     placeholder="example@email.com" value="{{ form.login.value|default_if_none:'' }}" />
              <div class="mt-1 text-xs text-red-300">{{ form.login.errors }}</div>
            </div>

            <!-- 비밀번호 -->
            <div>
              <div class="flex items-center justify-between">
                <label for="id_password" class="block text-xs font-semibold text-gray-200 tracking-wide">{% trans "비밀번호" %}</label>
                <a href="{% url 'account_reset_password' %}" class="text-xs text-[#00A8FC] hover:underline">{% trans "비밀번호를 잊으셨나요?" %}</a>
              </div>
              <input id="id_password" name="password" type="password" autocomplete="current-password" required
                     class="mt-2 w-full rounded-lg bg-[#1e1f22] text-white placeholder-gray-400 border border-transparent focus:border-[#5865F2] focus:outline-none focus:ring-2 focus:ring-[#5865F2]/40 px-4 py-3"
                     placeholder="••••••••" />
              <div class="mt-1 text-xs text-red-300">{{ form.password.errors }}</div>
            </div>

            <!-- 로그인 상태 유지 -->
            {% if form.remember %}
            <label class="flex items-center gap-2 text-sm text-gray-200">
              {{ form.remember }} <span>{% trans "로그인 상태 유지" %}</span>
            </label>
            {% endif %}

            <!-- next 유지 -->
            {% if redirect_field_value %}
              <input type="hidden" name="{{ redirect_field_name }}" value="{{ redirect_field_value }}">
            {% endif %}

            <!-- 로그인 버튼 -->
            <button type="submit" class="w-full rounded-lg bg-[#5865F2] hover:bg-[#4752C4] active:scale-[.99] transition px-4 py-3 font-semibold">
              {% trans "로그인" %}
            </button>

            <!-- 구분선 -->
            <div class="relative">
              <div class="absolute inset-0 flex items-center" aria-hidden="true">
                <div class="w-full border-t border-white/10"></div>
              </div>
              <div class="relative flex justify-center">
                <span class="bg-[#313338] px-2 text-xs text-gray-300">{% trans "또는" %}</span>
              </div>
            </div>

            <!-- 소셜 로그인 (카카오/네이버) -->
            <div class="grid grid-cols-2 gap-3">
              <a href="{% provider_login_url 'kakao' %}"
                 class="text-center rounded-lg bg-[#232428] hover:bg-[#2b2d31] ring-1 ring-white/10 px-4 py-2 text-sm">
                 {% trans "카카오로 계속" %}
              </a>
              {% comment %} <a href="{% provider_login_url 'naver' %}"
                 class="text-center rounded-lg bg-[#232428] hover:bg-[#2b2d31] ring-1 ring-white/10 px-4 py-2 text-sm">
                 {% trans "네이버로 계속" %}
              </a> {% endcomment %}
            </div>

            <!-- 가입 링크 -->
            <p class="text-xs text-gray-300">
              {% trans "계정이 없으신가요?" %}
              <a href="{% url 'account_signup' %}" class="text-[#00A8FC] hover:underline">{% trans "가입하기" %}</a>
            </p>
          </form>
        </div>
      </div>
    </section>
  </main>

  <footer class="py-6 text-center text-[11px] text-gray-400">
    {% trans "이 페이지는 학습/포트폴리오용 클론 UI입니다." %}
  </footer>
</body>
</html>
