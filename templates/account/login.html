{% load i18n static socialaccount %}
<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{% trans "로그인" %}</title>
  <!-- 중요: 회원가입과 동일한 CSS만 사용 -->
  <link id="auth-style" rel="stylesheet" href="{% static 'css/login_signup.css' %}">
</head>
<body class="page-body">
  <div class="bg-layer"></div>

<div id="authView" data-view="login">

  <main class="modal-shell" role="dialog" aria-labelledby="loginTitle" aria-modal="true">
    <aside class="modal-side">
      <div class="side-graphic" aria-hidden="true"></div>
      <h2 class="side-title">{% trans "다시 만나서 반가워요!" %}</h2>
      <p class="side-subtitle">{% trans "계정으로 바로 시작해요." %}</p>
    </aside>

    <section class="modal-content">
      <header class="content-header">
        <h1 id="loginTitle" class="content-title">{% trans "로그인" %}</h1>
      </header>

      <!-- ▼▼▼ 오직 이 내부만 교체됩니다 ▼▼▼ -->
        <form method="post" action="{% url 'account_login' %}" class="signup-form" novalidate>
          {% csrf_token %}

          {% if form.non_field_errors %}
            <div class="form-error-global">{{ form.non_field_errors }}</div>
          {% endif %}

          <div class="form-group">
            <label for="id_login">{% trans "이메일 또는 사용자명" %}</label>
            <input id="id_login" name="login" type="text"
                   value="{{ form.login.value|default_if_none:'' }}"
                   placeholder="you@example.com" required />
            {% if form.login.errors %}<p class="form-error">{{ form.login.errors|striptags }}</p>{% endif %}
          </div>

          <div class="form-group">
            <div class="label-row">
              <label for="id_password">{% trans "비밀번호" %}</label>
              <button type="button" class="link-small" data-toggle="#id_password">{% trans "표시" %}</button>
            </div>
            <input id="id_password" name="password" type="password" placeholder="••••••••" required />
            {% if form.password.errors %}<p class="form-error">{{ form.password.errors|striptags }}</p>{% endif %}
          </div>

          <button type="submit" class="btn-primary">{% trans "로그인" %}</button>
          <!-- 소셜 로그인: 카카오 -->
          <div class="social-login">
            <div class="social-divider" aria-hidden="true">
              <span>{% trans "또는" %}</span>
            </div>

            {# PJAX가 가로채지 않도록 class="auth-nav"는 넣지 않습니다 #}
            <a
              class="btn-kakao"
              href="{% provider_login_url 'kakao' process='login' %}{% if redirect_field_value %}?next={{ redirect_field_value|urlencode }}{% endif %}"
              aria-label="{% trans '카카오로 로그인' %}"
              rel="nofollow"
            >
              {% trans "카카오로 계속하기" %}
            </a>

            <a
              class="btn-naver"
              href="{% provider_login_url 'naver' process='login' %}{% if redirect_field_value %}?next={{ redirect_field_value|urlencode }}{% endif %}"
              aria-label="{% trans '네이버로 로그인' %}"
              rel="nofollow"
              >
              {% trans "네이버로 계속하기" %}
          </a>
        </div>

          <p class="switch-auth">
            {% trans "처음이신가요?" %}
            <!-- 회원가입 URL, PJAX 대상 -->
            <a href="{% url 'account_signup' %}" class="link auth-nav">{% trans "회원가입" %}</a>
          </p>
        </form>
      <!-- ▲▲▲ 교체 영역 끝 ▲▲▲ -->
    </section>
  </main>
</div>

  <!-- 비밀번호 토글 등 공통 스크립트 -->
  <script src="{% static 'js/signup.js' %}"></script>
  <!-- PJAX 스크립트 -->
  <script src="{% static 'js/auth-pjax.js' %}"></script>
</body>
</html>
