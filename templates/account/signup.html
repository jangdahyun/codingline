{% load i18n static %}
<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{% trans "회원가입" %}</title>
  <link id="auth-style" rel="stylesheet" href="{% static 'css/login_signup.css' %}">
</head>
<body class="page-body">
  <div class="bg-layer"></div>
<div id="authView" data-view="signup">
  <main class="modal-shell" role="dialog" aria-labelledby="signupTitle" aria-modal="true">
    <aside class="modal-side">
      <div class="side-graphic" aria-hidden="true"></div>
      <h2 class="side-title">{% trans "새 계정 만들기" %}</h2>
      <p class="side-subtitle">{% trans "친구들과 함께하세요!" %}</p>
    </aside>

    <section class="modal-content">
      <header class="content-header">
        <h1 id="signupTitle" class="content-title">{% trans "계정 만들기" %}</h1>
      </header>

      <!-- ▼▼▼ 이 래퍼의 내부만 교체됩니다 ▼▼▼ -->
        <form method="post" action="{% url 'account_signup' %}" class="signup-form" novalidate>
          {% csrf_token %}

          {% if form.non_field_errors %}
            <div class="form-error-global">{{ form.non_field_errors }}</div>
          {% endif %}

          <div class="form-group">
            <label for="id_email">{% trans "이메일" %}</label>
            <input id="id_email" name="email" type="email"
                   value="{{ form.email.value|default_if_none:'' }}"
                   placeholder="you@example.com" required />
            {% if form.email.errors %}<p class="form-error">{{ form.email.errors|striptags }}</p>{% endif %}
          </div>

          <div class="form-group">
            <label for="id_username">{% trans "사용자명" %}</label>
            <input id="id_username" name="username" type="text"
                   value="{{ form.username.value|default_if_none:'' }}"
                   placeholder="your_nickname" required />
            {% if form.username.errors %}<p class="form-error">{{ form.username.errors|striptags }}</p>{% endif %}
          </div>

          <div class="form-group">
            <div class="label-row">
              <label for="id_password1">{% trans "비밀번호" %}</label>
              <button type="button" class="link-small" data-toggle="#id_password1">{% trans "표시" %}</button>
            </div>
            <input id="id_password1" name="password1" type="password" placeholder="••••••••" required />
            {% if form.password1.errors %}<p class="form-error">{{ form.password1.errors|striptags }}</p>{% endif %}
          </div>

          <div class="form-group">
            <label for="id_password2">{% trans "비밀번호 확인" %}</label>
            <input id="id_password2" name="password2" type="password" placeholder="••••••••" required />
            {% if form.password2.errors %}<p class="form-error">{{ form.password2.errors|striptags }}</p>{% endif %}
          </div>

          <div class="form-group">
            <label for="id_nickname">닉네임</label>
            <input id="id_nickname" name="nickname" type="text"
                  value="{{ form.nickname.value|default_if_none:'' }}" required />
            {% if form.nickname.errors %}<p class="form-error">{{ form.nickname.errors|striptags }}</p>{% endif %}
          </div>

          <div class="form-group">
            <label for="id_phone_number">{% trans "전화번호" %}</label>
            <input id="id_phone_number" name="phone_number" type="tel"
                  value="{{ form.phone_number.value|default_if_none:'' }}"
                  placeholder="010-1234-5678" required />
            {% if form.phone_number.errors %}<p class="form-error">{{ form.phone_number.errors|striptags }}</p>{% endif %}
          </div>

          <div class="form-group">
            <label>{% trans "생년월일" %}</label>

            <div class="dob-row">
              <!-- name 제거: 이 셀렉트들은 서버로 안 보냄(보기 용/조합 용) -->
              <select id="dob_year"  required
                      data-selected="{{ form.birth_date.value|date:'Y' }}"></select>
              <select id="dob_month" required
                      data-selected="{{ form.birth_date.value|date:'n' }}"></select>
              <select id="dob_day"   required
                      data-selected="{{ form.birth_date.value|date:'j' }}"></select>
            </div>

            <!-- 진짜로 서버에 보내는 필드(YYYY-MM-DD) -->
            <input type="hidden" id="id_birth_date" name="birth_date"
                  value="{{ form.birth_date.value|default_if_none:'' }}" />

            {% if form.birth_date.errors %}
              <p class="form-error">{{ form.birth_date.errors|striptags }}</p>
            {% endif %}
            <p class="form-hint">{% trans "만 13세 이상만 가입 가능합니다." %}</p>
          </div>


          <p class="terms">
            {% trans "가입을 진행하면" %} <a href="#" class="link">{% trans "서비스 약관" %}</a>,
            <a href="#" class="link">{% trans "개인정보 처리방침" %}</a> {% trans "에 동의하게 됩니다." %}
          </p>

          <button type="submit" class="btn-primary">{% trans "계속하기" %}</button>

          <p class="switch-auth">
            {% trans "이미 계정이 있으신가요?" %}
            <!-- 여기! 실제 로그인 URL, PJAX 대상 -->
            <a href="{% url 'account_login' %}" class="link auth-nav">{% trans "로그인" %}</a>
          </p>
        </form>
      <!-- ▲▲▲ 교체 영역 끝 ▲▲▲ -->
    </section>
  </main>
</div>

  <script src="{% static 'js/signup.js' %}?v={% now 'U' %}"></script>
  <!-- PJAX 스크립트 추가 -->
  <script src="{% static 'js/auth-pjax.js' %}"></script>
</body>
</html>
