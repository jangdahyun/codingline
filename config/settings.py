"""
Django settings for config project.
Generated by 'django-admin startproject' using Django 5.2.5
"""

from pathlib import Path
import os
from dotenv import load_dotenv  # .env íŒŒì¼ ë¡œë“œ  
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ê¸°ë³¸ ê²½ë¡œ
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
BASE_DIR = Path(__file__).resolve().parent.parent  # í”„ë¡œì íŠ¸ ë£¨íŠ¸

# .env ê²½ë¡œ ëª…ì‹œ(UTF-8), OS í™˜ê²½ë³€ìˆ˜ë³´ë‹¤ .env ìš°ì„ (override=True)
load_dotenv(dotenv_path=BASE_DIR / ".env", override=True, encoding="utf-8")

def _req(name: str) -> str:
    """í•„ìˆ˜ í™˜ê²½ë³€ìˆ˜ ë¡œë”: ì—†ìœ¼ë©´ ì¦‰ì‹œ ì˜¤ë¥˜ë¡œ ì•Œë ¤ì¤Œ(ë°°í¬ ì•ˆì „ì„±â†‘)."""
    v = os.getenv(name)

    if not v:
        raise RuntimeError(f"[ENV ëˆ„ë½] {name} ê°€ ë¹„ì–´ìˆì–´ìš”. .env ë° load_dotenv ê²½ë¡œë¥¼ í™•ì¸!")
    return v

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ë³´ì•ˆ/ë””ë²„ê·¸
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
SECRET_KEY = _req("DJANGO_SECRET_KEY")     # â˜… í•„ìˆ˜: .envì— ì„¤ì •
DEBUG = bool(int(os.getenv("DJANGO_DEBUG", "1")))
ALLOWED_HOSTS = os.getenv("DJANGO_ALLOWED_HOSTS", "").split(",") if not DEBUG else ["*"]
# ì˜ˆ: DJANGO_ALLOWED_HOSTS=example.com,www.example.com

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ì•± ì„¤ì •
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
INSTALLED_APPS = [
    "daphne",                          # ASGI ì„œë²„
    "channels",                         # ì±„ë„(ì›¹ì†Œì¼“)
    
    "django.contrib.admin",          # ê´€ë¦¬ì
    "django.contrib.auth",           # ì¸ì¦/ê¶Œí•œ
    "django.contrib.contenttypes",   # ê¶Œí•œ ì‹œìŠ¤í…œ ë³´ì¡°
    "django.contrib.sessions",       # ì„¸ì…˜
    "django.contrib.messages",       # í”Œë˜ì‹œ ë©”ì‹œì§€
    "django.contrib.staticfiles",    # ì •ì  íŒŒì¼

    "django.contrib.sites",          # allauth í•„ìˆ˜
    "allauth",                       # allauth ì½”ì–´
    "allauth.account",               # ì´ë©”ì¼/ì•„ì´ë”” ê³„ì •
    "allauth.socialaccount",         # ì†Œì…œ ê³„ì • í”„ë ˆì„ì›Œí¬

    "allauth.socialaccount.providers.kakao",  # ì¹´ì¹´ì˜¤ provider
    "allauth.socialaccount.providers.naver",  # ë„¤ì´ë²„ provider

    "accounts.apps.AccountsConfig",                      # ì»¤ìŠ¤í…€ ìœ ì € ì•±
    # "collab",                           # í˜‘ì—… ì•±
    'collab.apps.CollabConfig',
    "logui",                           # ë¡œê·¸ UI

]
ASGI_APPLICATION = "config.asgi.application" # Channelsìš© ASGI ì• í”Œë¦¬ì¼€ì´ì…˜

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# Redis / Channels (WebSocket)
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

# 1) REDIS_URL: .env ì—†ìœ¼ë©´ ë¡œì»¬ 6379ë¡œ ê¸°ë³¸ê°’
REDIS_URL = os.getenv("REDIS_URL", "redis://127.0.0.1:6379/0")

# 2) Channelsê°€ ì‚¬ìš©í•  ì±„ë„ ë ˆì´ì–´
CHANNEL_LAYERS = {
    "default": {
        "BACKEND": "channels_redis.core.RedisChannelLayer",  # Redis ê¸°ë°˜ ì±„ë„ ë ˆì´ì–´
        "CONFIG": {
            "hosts": [REDIS_URL],                            # â† hostsëŠ” CONFIG ì•ˆì—!
            # í•„ìš” ì‹œ ì˜µì…˜ ì˜ˆ: "capacity": 1000, "expiry": 60
        },
    }
}





SESSION_ENGINE = "django.contrib.sessions.backends.db"



MIDDLEWARE = [
    "django.middleware.security.SecurityMiddleware",
    "django.contrib.sessions.middleware.SessionMiddleware",
    "django.middleware.common.CommonMiddleware",
    "django.middleware.csrf.CsrfViewMiddleware",
    "django.contrib.auth.middleware.AuthenticationMiddleware",
    "allauth.account.middleware.AccountMiddleware",   # â˜… AuthMiddleware ë°”ë¡œ ë’¤ (ì„¸ì…˜/ìœ ì € í™œìš©)
    "django.contrib.messages.middleware.MessageMiddleware",
    "django.middleware.clickjacking.XFrameOptionsMiddleware",
]
# Redis ìºì‹œ (channels ë ˆë””ìŠ¤ì™€ DB ë¶„ë¦¬: 1ë²ˆ DB ì‚¬ìš© ê¶Œì¥)
CACHES = {
    "default": {
        "BACKEND": "django.core.cache.backends.redis.RedisCache",
        "LOCATION": os.getenv("REDIS_URL_CACHE", "redis://127.0.0.1:6379/1"),
    }
}
SESSION_SAVE_EVERY_REQUEST = True

ROOT_URLCONF = "config.urls"

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# í…œí”Œë¦¿
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
TEMPLATES = [
    {
        "BACKEND": "django.template.backends.django.DjangoTemplates",
        "DIRS": [BASE_DIR / "templates"],  # í”„ë¡œì íŠ¸ ì „ì—­ templates í´ë”
        "APP_DIRS": True,
        "OPTIONS": {
            "context_processors": [
                "django.template.context_processors.debug",
                "django.template.context_processors.request",  # â˜… allauth í…œí”Œë¦¿ì´ request í•„ìš”
                "django.contrib.auth.context_processors.auth",
                "django.contrib.messages.context_processors.messages",
            ],
        },
    },
]

WSGI_APPLICATION = "config.wsgi.application"

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ì‚¬ì´íŠ¸/ë¡œê·¸ì¸ ë¦¬ë‹¤ì´ë ‰íŠ¸
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
SITE_ID = int(os.getenv("SITE_ID", "4"))   # /admin/sites/site/ì™€ ë§¤ì¹­
LOGIN_REDIRECT_URL = os.getenv("LOGIN_REDIRECT_URL", "/")   # ë¡œê·¸ì¸ ì„±ê³µ í›„ ì´ë™
LOGOUT_REDIRECT_URL = os.getenv("LOGOUT_REDIRECT_URL", "/") # ë¡œê·¸ì•„ì›ƒ í›„ ì´ë™

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# allauth ì‹ ê¶Œì¥ ì„¤ì •(Deprecated ê²½ê³  ì œê±°)
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ì˜ˆ: username+email ë‘˜ ë‹¤ë¡œ ë¡œê·¸ì¸ í—ˆìš©
ACCOUNT_LOGIN_METHODS = {"username", "email"}

# íšŒì›ê°€ì…ì—ì„œ ë°›ì„ í•„ë“œ ì •ì˜(ë³„ * = í•„ìˆ˜)
# usernameì„ ì“°ì§€ ì•ŠëŠ”ë‹¤ë©´ ì•„ë˜ì²˜ëŸ¼ email+pwë§Œ:
# ACCOUNT_SIGNUP_FIELDS = ["email*", "password1*", "password2*"]
# usernameë„ ì“°ë ¤ë©´:
ACCOUNT_SIGNUP_FIELDS = ["email*", "username*", "password1*", "password2*","birth_date*","nickname*", "phone_number*"]

# ì´ë©”ì¼ ê²€ì¦ ì •ì±…: ê°œë°œì€ optional, ìš´ì˜ì€ "mandatory" ê¶Œì¥
ACCOUNT_EMAIL_VERIFICATION = os.getenv("ACCOUNT_EMAIL_VERIFICATION", "optional").lower()

# (ì„ íƒ) ì»¤ìŠ¤í…€ ë¡œê·¸ì¸ í¼ ì—°ê²° ì‹œ
ACCOUNT_FORMS = {
    "login": "accounts.forms.MyLoginForm", 
    "signup": "accounts.forms.MySignupForm",
}
SOCIALACCOUNT_FORMS = {
    "signup": "accounts.forms.MySocialSignupForm",
}

# ì¸ì¦ ë°±ì—”ë“œ: allauth ì¶”ê°€ í•„ìˆ˜
AUTHENTICATION_BACKENDS = [
    "django.contrib.auth.backends.ModelBackend",
    "allauth.account.auth_backends.AuthenticationBackend",
]

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ë°ì´í„°ë² ì´ìŠ¤(MySQL)
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
DB_NAME = _req("DB_NAME")
DB_USER = _req("DB_USER")
DB_PASSWORD = _req("DB_PASSWORD")
DB_HOST = os.getenv("DB_HOST", "localhost")
DB_PORT = os.getenv("DB_PORT", "3306")

DATABASES = {
    "default": {
        "ENGINE": "django.db.backends.mysql",
        "NAME": DB_NAME,
        "USER": DB_USER,
        "PASSWORD": DB_PASSWORD,
        "HOST": DB_HOST,
        "PORT": DB_PORT,
        "OPTIONS": {
            "charset": "utf8mb4",
            "init_command": "SET sql_mode='STRICT_TRANS_TABLES', time_zone = '+00:00'",
        },
    }
}

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ì‚¬ìš©ì ëª¨ë¸
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
AUTH_USER_MODEL = "accounts.User"  # â˜… í”„ë¡œì íŠ¸ ì´ˆê¸°ì— ê²°ì •(ë§ˆì´ê·¸ë ˆì´ì…˜ ì „)

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# íŒ¨ìŠ¤ì›Œë“œ ì •ì±…/í•´ì‹œ
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
PASSWORD_HASHERS = [
    "django.contrib.auth.hashers.Argon2PasswordHasher",       # ì‹ ê·œ ë¹„ë²ˆ ê¸°ë³¸ Argon2
    "django.contrib.auth.hashers.PBKDF2PasswordHasher",
    "django.contrib.auth.hashers.PBKDF2SHA1PasswordHasher",
    "django.contrib.auth.hashers.BCryptSHA256PasswordHasher",
]

AUTH_PASSWORD_VALIDATORS = [
    {"NAME": "django.contrib.auth.password_validation.UserAttributeSimilarityValidator"},
    {"NAME": "django.contrib.auth.password_validation.MinimumLengthValidator"},  # ê¸°ë³¸ ìµœì†Œ 8ì
    {"NAME": "django.contrib.auth.password_validation.CommonPasswordValidator"},
    {"NAME": "django.contrib.auth.password_validation.NumericPasswordValidator"},
]

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# êµ­ì œí™”/ì‹œê°„ëŒ€
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
LANGUAGE_CODE = "ko-kr"
TIME_ZONE = "Asia/Seoul"
USE_I18N = True
USE_TZ = True

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ì •ì /ë¯¸ë””ì–´ (login.css í¬í•¨)
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
STATIC_URL = "/static/"                         # ì •ì  URL í”„ë¦¬í”½ìŠ¤
STATICFILES_DIRS = [BASE_DIR / "static"]        # ê°œë°œ: /static/css/login.css ë“±
# ë°°í¬ ì‹œ collectstatic ëŒ€ìƒ
STATIC_ROOT = BASE_DIR / "staticfiles"

MEDIA_URL = "/media/"
MEDIA_ROOT = BASE_DIR / "media"

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ì´ë©”ì¼ (ê°œë°œ: ì½˜ì†” ì¶œë ¥)
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
EMAIL_BACKEND = "django.core.mail.backends.console.EmailBackend"

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# allauth ì†Œì…œ í”„ë¡œë°”ì´ë”(ì„ íƒì ìœ¼ë¡œ .envì—ì„œ ë°”ë¡œ ì£¼ì…)
# Adminì˜ SocialAppê³¼ ì¤‘ë³µ ì„¤ì • ì‹œ Admin ê°’ì´ ìš°ì„ .
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
SOCIALACCOUNT_PROVIDERS = {
    "kakao": {  # ì¹´ì¹´ì˜¤ëŠ” ë‹‰ë„¤ì„/ì´ë¯¸ì§€ë§Œ ë°›ë„ë¡ ìœ ì§€
        "SCOPE": ["profile_nickname", "profile_image"],
    },
    "naver": {
        # ë„¤ì´ë²„ì—ì„œ ì“°ëŠ” í•„ë“œë¥¼ ë°›ê¸° ìœ„í•œ ë™ì˜ í•­ëª©ë“¤
        "SCOPE": ["name", "email", "nickname", "profile_image", "birthyear", "birthday", "mobile"],
    },
}

# ê¸°ë³¸ Primary Key íƒ€ì…
DEFAULT_AUTO_FIELD = "django.db.models.BigAutoField"

# settings.py (íŒŒì¼ í•˜ë‹¨ ì–´ë”˜ê°€ì— ì¶”ê°€)

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ë¡œê·¸ ì„¤ì •(ë¯¸ë‹ˆë©€)
LOG_LEVEL = os.getenv("DJANGO_LOG_LEVEL", "INFO").upper()

LOGGING = {
    "version": 1,
    "disable_existing_loggers": False,
    "formatters": {
        "short": {"format": "%(levelname)s %(name)s: %(message)s"},
    },
    "handlers": {
        "console": {"class": "logging.StreamHandler", "formatter": "short"},
    },
    "root": {"handlers": ["console"], "level": "WARNING"},
    "loggers": {
        "django":         {"handlers": ["console"], "level": "WARNING", "propagate": False},
        "allauth":        {"handlers": ["console"], "level": "WARNING", "propagate": False},
        "asyncio":        {"handlers": ["console"], "level": "WARNING", "propagate": False},
        "daphne":         {"handlers": ["console"], "level": "WARNING", "propagate": False},
        "channels":       {"handlers": ["console"], "level": "WARNING", "propagate": False},
        "channels_redis": {"handlers": ["console"], "level": "WARNING", "propagate": False},
        "asgiref":        {"handlers": ["console"], "level": "WARNING", "propagate": False},

        # ğŸ‘‡ ë‚´ê°€ ë³´ëŠ” ë¡œê±°
        "accounts": {"handlers": ["console"], "level": LOG_LEVEL, "propagate": False},
        "collab":   {"handlers": ["console"], "level": LOG_LEVEL, "propagate": False},
        "lobby":   {"handlers": ["console"], "level": LOG_LEVEL, "propagate": False},

    },
}

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”€ ì†Œì…œ ì–´ëŒ‘í„° ì„¤ì •
SOCIALACCOUNT_ADAPTER = "accounts.adapters.MySocialAccountAdapter"

# ë¡œê·¸ì¸ í™•ì¸í™”ë©´ Pass
SOCIALACCOUNT_LOGIN_ON_GET = True
# ë¡œê·¸ì•„ì›ƒì‹œ ë¦¬ë‹¤ì´ë ‰íŠ¸
ACCOUNT_LOGOUT_ON_GET=True
ACCOUNT_LOGOUT_REDIRECT_URL = "/"

# ë£¨íŠ¸ URL ì„¤ì •
ACCOUNT_DEFAULT_HTTP_PROTOCOL = "http"

# ìë™ íšŒì›ê°€ì… ë¹„í™œì„±í™”
SOCIALACCOUNT_AUTO_SIGNUP = False



# ğŸ”Š ê°œë°œìš© ê°„ë‹¨ ë¡œê¹…(ì½˜ì†”)
# LOGGING = {
#     "version": 1,
#     "handlers": {"console": {"class": "logging.StreamHandler"}},
#     "loggers": {
#         "accounts": {"handlers": ["console"], "level": "DEBUG"},
#         "allauth":  {"handlers": ["console"], "level": "INFO"},   # ì›í•˜ë©´ DEBUG
#         "django.request": {"handlers": ["console"], "level": "WARNING"},
#     },
# }
